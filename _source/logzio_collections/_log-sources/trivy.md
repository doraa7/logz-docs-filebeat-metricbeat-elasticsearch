---
title: Ship reports from Trivy Operator
logo:
  logofile: trivy-logo.png
  orientation: vertical
data-source: Trivy Operator
description: Ship reports from Trivy Operator
data-for-product-source: Logs
contributors:
  - nshishkin
shipping-tags:
  - container
order: 1380
---
[Trivy](https://www.aquasec.com/products/trivy/) is an open-source vulnerability scanner for containers that can detect vulnerabilities in OS packages and application dependencies. The [Trivy Operator](https://github.com/aquasecurity/trivy-operator) is a Kubernetes operator that automates the process of scanning container images for vulnerabilities using Trivy.

This integration utilizes the logzio-monitoring Helm Chart to deploy the Trivy Operator within your Kubernetes cluster. The Trivy Operator scans container images for vulnerabilities and forwards the generated reports to Logz.io for further analysis and monitoring.

<!-- info-box-start:info -->
At present, only vulnerability reports are being collected.
{:.info-box.note}
<!-- info-box-end -->


**Before you begin, you'll need**: 

* an active account with Logz.io
* Kubernetes cluster to send reports from

<div class="tasklist">

##### Select the namespace

This integration will be deployed in the namespace you set in values.yaml. The default namespace for this integration is `monitoring`.

To select a different namespace, run:

```shell
kubectl create namespace <<NAMESPACE>>
```

* Replace `<<NAMESPACE>>` with the name of your namespace.


##### Add `logzio-helm` repo
  
```shell
helm repo add logzio-helm https://logzio.github.io/logzio-helm
helm repo update
```

###### Run the Helm deployment code

```shell
helm install -n monitoring \
--set env_id="<<ENV-ID>>" \
--set secrets.logzioShippingToken="<<LOG-SHIPPING-TOKEN>>" \
--set secrets.logzioListener="<<LISTENER-HOST>>" \
logzio-trivy logzio-helm/logzio-trivy
```

| Parameter | Description |
|---|---|
| `<<ENV-ID>>` | A unique name assigned to your environment's identifier, to differentiate telemetry data across various environments.
| `<<LOG-SHIPPING-TOKEN>>` | {% include log-shipping/log-shipping-token.html %} |
| `<<LISTENER-HOST>>` | {% include log-shipping/listener-var.html %} |


##### Check Logz.io for your logs

Give your logs some time to get from your system to ours,
and then open [Open Search Dashboards](https://app.logz.io/#/dashboard/osd).

</div>

####  Customizing Helm chart parameters


##### Configure customization options

You can use the following options to update the Helm chart parameters:

* Specify parameters using the `--set key=value[,key=value]` argument to `helm install`

* Edit the `values.yaml`

* Overide default values with your own `my_values.yaml` and apply it in the `helm install` command.

###### Custom parameters

| Parameter	| Description | Default |
| --- | --- | --- |
| `trivy-operator.trivy.ignoreUnfixed` | Determines whether to display only fixed vulnerabilities in the reports generated by Trivy. | `false` |
| `nameOverride` | Overrides the Chart name for resources. | `""` |
| `fullnameOverride` | Overrides the full name of the resources. | `""` |
| `schedule` | Time for daily scanning for security reports and sending them to Logz.io, in the "HH:MM" format. | `"07:00"` |
| `restartPolicy` | Container restart policy | `OnFailure` |
| `image` | Container image | `logzio/trivy-to-logzio` |
| `imageTag` | Container image tag | `0.1.0` |
| `env_id` | A unique name assigned to your environment's identifier, to differentiate telemetry data across various environments. | `""` |
| `terminationGracePeriodSeconds` | Termination period (in seconds) to wait before killing Fluentd pod process on pod shutdown. | `30` |
| `serviceAccount.create` | Specifies whether to create a service account for the cron job. | `true` |
| `serviceAccount.name` | Name of the service account. | `""` |
| `secrets.enabled` | Specifies wheter to create a secret for the deployment | `true` |
| `secrets.name` | Secret name | `"logzio-logs-secret-trivy"` |
| `secrets.logzioShippingToken` | Your logz.io log shipping token | `""` |
| `secrets.logzioListener` | Your logz.io listener host | `""` (defaults to us region) |
| `scriptLogLevel` | Log level of the script that sends security risk to Logz.io. Can be one of: `DEBUG`, `INFO`, `WARNING`, `ERROR`, `CRITICAL`. | `INFO` |


#### Uninstalling the Chart

The Uninstall command is used to remove all the Kubernetes components associated with the chart and to delete the release.  

To uninstall the `logzio-trivy` deployment, use the following command:

```shell
helm uninstall logzio-trivy
```